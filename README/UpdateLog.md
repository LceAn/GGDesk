## 📝 完整更新日志
### [2025-11-21] Beta 9.1 - 配置归一化 (Config Normalization)

**🛡️ 逻辑澄清 (Logic Clarification)**

  * **配置主从关系**: 明确了“清理去重工具” (`DedupPage`) 为判重灵敏度的主控端，“规则管理” (`RulesDialog`) 仅作为消费端。
  * **扫描行为重命名**: 将扫描设置中的“智能去重”更名为 **“扫描时自动忽略重复项”**，准确描述其过滤行为。

**✨ 交互优化**

  * **全局同步**: 在去重工具页新增 **“💾 设为全局默认”** 按钮。用户在此处调整好理想的查重阈值后，可一键同步给扫描器使用。
  * **只读展示**: 规则管理页现在只显示当前的全局阈值，不再提供重复的调节滑块，避免了设置冲突。
---

### [2025-11-21] Beta 9.0 - 独立去重工具箱 (Standalone Dedup Tool)

**🧹 深度清理工具 (Deep Cleaning)**
* **独立一级菜单**: 将智能去重功能升级为独立的 **“清理去重”** 页面。
* **数据库级维护**: 该工具直接读取本地数据库 (`user_data.db`)，允许用户对长期使用后积累的冗余、失效或重复的快捷方式进行批量清洗。
* **双重删除**: 提供选项，允许在删除数据库记录的同时，**物理删除** 本地生成的 `.lnk` 文件，实现彻底清理。

**🧱 模块化复用**
* 直接复用后端的 `DuplicateAnalyzer` 算法，实现了扫描阶段与维护阶段的逻辑统一。
---

### [2025-11-21] Beta 8.2 - 冲突解决器 (Conflict Solver)

**⚖️ 交互式去重 (Interactive Deduplication)**
* **冲突解决弹窗**: 新增 `DeduplicateSolverDialog`。当扫描发现疑似重复项（如路径相似或名称相近）时，不再自动“一刀切”，而是弹出窗口展示冲突组。
* **智能选择**: 提供“智能选择”按钮，自动勾选每组中路径最短或权重最高的项目，同时允许用户人工干预。
* **灵敏度调节**: 在规则设置中新增了去重算法的相似度阈值调节（Slider），用户可自定义判定的严格程度。

---

### [2025-11-21] Beta 8.1.1 - 紧急修复 (Critical Hotfix)

**🔥 致命漏洞修复**
* **Ignore List Fix**: 从默认忽略目录列表中 **移除了 `bin`** 目录。
    * **原因**: 之前误将 `bin` 视为垃圾目录，导致大量将主程序存放在 `bin` 下的软件（如 JetBrains 全家桶）无法被扫描到。
* **Logic Deadlock**: 修复了在开启去重时的逻辑死锁问题，确保流式输出的实时性。

---

### [2025-11-21] Beta 8.1 - 逻辑修复与导航对齐 (Fixes & Alignment)

**🐛 关键修复 (Critical Fixes)**
* **Custom Scan Fix**: 修复了 Beta 8.0 中因过度追求流式处理导致“自定义目录”智能识别失效的问题。回滚了部分聚合逻辑，在保持流式输出的同时确保了根目录识别的准确性。
* **Nav Index**: 修复了移除规则页面后，侧边栏按钮 ID 与页面栈索引错位的问题。

**⚙️ 逻辑增强**
* **Dedup Integration**: 确保了独立的去重模块被正确集成到扫描流程中。

---

### [2025-11-21] Beta 8.0 - 架构重塑与实时响应 (Streaming Architecture)

**⚡ 核心架构升级 (Core Architecture)**
* **流式扫描 (Streaming Generator)**: 
    * 重构了后端核心算法，从“全量扫描后返回”改为 **Generator (生成器)** 模式。
    * **效果**: 扫描结果现在是 **“扫到一个显示一个” (Real-time)**，彻底消除了扫描大目录时的漫长等待感。
* **去重模块独立 (Dedup Module)**: 新增 `core_dedup.py`，将去重逻辑从扫描器中解耦，为后续的高级去重工具打下基础。

**🖥️ 界面重组 (UI Reorganization)**
* **规则弹窗化**: 移除了侧边栏的“规则管理”页面，将其改为在扫描页面通过弹窗 (`RulesDialog`) 调起，逻辑归属更合理。
* **启动管理重构**: 将“启动管理”页面重构为控制台，上半部分用于设置图标大小/排序，下半部分保留数据库表格入口。

---
### [2025-11-20] Beta 7.4 - 智能降噪与垃圾过滤 (Smart Noise Reduction)

**🗑️ 垃圾目录启发式过滤 (Junk Directory Heuristics)**

  * **哈希文件夹识别**: 针对 DeepL、Electron 应用等产生的长字符串随机命名文件夹（如 `sha256new_NX...`），算法会自动识别并跳过，不再将其视为软件根目录。
  * **开发环境降噪**: 新增了 `BAD_PATH_KEYWORDS` 词库，自动屏蔽包含 `runtime`, `framework`, `packages`, `redist` 等关键词的目录。
  * **Visual Studio 优化**: 专门针对 `Microsoft Visual Studio` 极其复杂的目录结构进行了优化，默认忽略其内部成千上万的组件和工具。

**🛡️ 黑名单扩容 (Expanded Blocklist)**

  * 更新了内置的 `DEFAULT_BLOCKLIST`，新增了 `NetCoreCheck.exe`, `vcredist_*.exe`, `crashpad_handler.exe` 等常见干扰项。

-----
### [2025-11-20] Beta 7.3 - 侧边栏完美修复 (Sidebar Perfect Fix)

**🐛 Bug Fixes**

  * **Attribution Restored**: 成功找回了侧边栏底部的 **"By LceAn"** 归属信息标签，并确保其点击功能正常。
  * **Sidebar Alignment**: 彻底修复了侧边栏折叠时的图标错位问题。
      * **逻辑优化**: 在 `toggle_sidebar` 时动态切换按钮样式 (`text-align: center` vs `left`)，确保图标在窄模式下完美居中，宽模式下左对齐。
  * **Visual Cleanup**: 折叠侧边栏时，现在会自动隐藏“分类标题”、“版本号”和“作者名”，防止文字溢出或重叠，展开时自动恢复。

**✨ 体验提升**

  * **Toggle Button**: 汉堡菜单按钮在折叠时也会自动居中并放大图标，视觉重心更稳。
-----
### [2025-11-19]  Beta 7.2 更新概要

1.  **后端 (`scanner_backend/const.py`)**:
      * 增加 `icon_size` (图标大小), `show_badges` (显示角标), `sort_by` (排序方式) 等配置项默认值。
2.  **新页面 (`ui/page_model_config.py`)**:
      * **新建**：模型配置页面（预留给 AI）。
3.  **启动管理 (`ui/page_launch_manage.py`)**:
      * **重构**：上半部分改为“显示设置”（滑块调节图标大小、排序下拉框、角标开关）；下半部分保留“数据库管理列表”。
4.  **快捷启动 (`ui/page_quick_launch.py`)**:
      * **美化**：去除边框，采用“悬浮图标”设计（类似 macOS Launchpad 或 Win11 开始菜单）。
      * **联动**：读取“启动管理”的设置，动态调整图标大小和排序。
5.  **主窗口 (`ui/main_window.py`)**:
      * **侧边栏重构**：增加“折叠/展开”按钮（汉堡菜单）。折叠时隐藏文字只留图标。
      * **菜单重组**：新增“软件设置”分类。
-----
### [2025-11-19] Beta 7.1 - 首页精修与体验优化 (Home Polish)

**🚀 首页重构 (Quick Launch)**

  * **卡片式设计**: 废弃了原生的列表样式，为每个程序图标增加了圆角白色卡片背景，悬停时有淡蓝色高亮效果，视觉更加现代、通透。
  * **功能菜单增强**:
      * **打开所在位置**: 右键菜单现在支持直接打开目标程序的文件夹（自动选中目标文件）。
      * **管理员运行**: 支持一键以管理员身份启动程序。
      * **移除**: 更加方便地从列表中删除不需要的程序。

**✨ 细节修复 (Details)**

  * **图标补全**: “启动管理”页面的表格现在会正确显示每个程序的图标，不再是纯文本列表。
  * **文案修正**: 侧边栏菜单统一为“快捷启动”，消除了命名的不一致性。

-----
### [2025-11-19] Beta 7.0.1 - 启动器实装 (Launcher Live)

**🚀 核心功能 (Core Feature)**

  * **数据打通**: 扫描程序页面新增“同时添加到我的桌面”选项。选中后，生成的快捷方式会自动录入本地数据库 (`user_data.db`)。
  * **我的桌面 (Quick Launch)**: 首页正式实装！现在可以以大图标网格形式展示已添加的程序，支持双击直接启动（兼容普通程序和 UWP 应用）。
  * **启动管理 (Launch Manager)**: 新增管理后台，以表格形式查看所有入库程序，支持删除操作。

**🔧 架构升级 (Architecture)**

  * **SQLite CRUD**: 后端实现了完整的数据库增删查改接口。
  * **页面联动**: 切换到“我的桌面”或“启动管理”时，自动从数据库拉取最新数据，确保视图同步。

-----
### [2025-11-19] Beta 7.0 - 欢迎界面美化与启动优化

**🎉 里程碑：Phase 2 启动**
我们正式开始构建 **GGDesk** 的数据核心。本次更新引入了 SQLite 数据库架构和全新的应用入口。

**🆕 新增特性**

  * **数据库架构**: 成功创建 `user_data.db` (用户核心数据) 和 `cache.db` (缓存数据)，为后续的数据持久化打下基础。
  * **欢迎向导**: 新增了首次启动时的引导窗口，介绍核心功能。
  * **快捷启动页**: 侧边栏新增了 **“我的桌面”** 菜单，这是未来展示所有已添加程序的“大本营”。

**⚙️ 变更**

  * 侧边栏菜单进行了重新分组（快捷启动 vs 工具箱）。
  * `config.ini` 新增 `is_first_run` 字段用于控制向导显示。

**✨ UI / UX 增强**

  * **欢迎界面大变身**:
      * 对 `WelcomeDialog` 进行了全面的视觉美化，包括背景渐变、更现代的字体样式、更大的图标元素和优化的布局。
      * 提升了首次使用时的视觉引导体验。
  * **启动流程优化**:
      * 首次运行 `WelcomeDialog` 仍然采用**模态 (Modal)** 方式，确保用户完成必要引导。
      * 为未来功能预留了**非模态 (Non-Modal)** 显示欢迎界面的接口，方便用户随时回顾。


-----
### [2025-11-19] Beta 6.0 - 后端架构重组 (Backend Refactoring)

**🧱 架构重构 (Backend Architecture)**

  * **Package Transition**: 将单文件的 `scanner_backend.py` 重构为标准的 Python Package (`scanner_backend/`)。
  * **Module Separation**:
      * `const.py`: 集中管理常量与默认配置。
      * `manager_config.py`: 专注于 INI 配置文件的读写。
      * `manager_rules.py`: 专注于 TXT 规则文件的 IO 操作。
      * `utils_system.py`: 封装 Windows API 交互（快捷方式、资源管理器）。
      * `core_discovery.py`: 包含核心的扫描、分词评分与去重算法。
  * **Facade Pattern**: 通过 `__init__.py` 提供统一接口，确保前端 UI 代码零修改即可无缝迁移至新架构。
-----
### [2025-11-19] Beta 5.5 - 规则界面重构与全文件支持 (Rules Redesign & File Types)

**✨ 界面重绘 (UI Redesign)**

  * **网格化布局 (Grid Layout)**: 重新设计了“规则管理”页面中的“目标文件类型”区域。采用 2x2 网格布局替代原有的线性排列，视觉更加整洁、对称。
  * **策略分离**: 将“智能根目录识别”开关从文件类型中剥离，作为独立的策略选项展示，逻辑层次更清晰。

**🔧 功能解锁 (Feature Unlock)**

  * **文件类型全解禁**:
      * 正式解锁了 `*.bat` (脚本) 和 `*.lnk` (快捷方式) 的勾选框。
      * 现在用户可以扫描自定义目录下的批处理脚本或快捷方式，并将其纳入统一管理。
  * **过滤一致性**: 后端逻辑确保了所有的黑名单、大小过滤规则同样适用于新增的 `bat`、`jar` 和 `lnk` 文件类型。
-----
### [2025-11-19] Beta 5.4 - JAR 支持与智能识别策略 (Strategy & Expansion)

**🔭 扫描能力扩展 (Scan Expansion)**

  * **JAR 文件支持**: 正式支持扫描 `*.jar` 文件。这对于 Minecraft 玩家和 Java 开发者来说是一个重大的功能补充。
  * **智能识别开关 (Strategy Toggle)**:
      * 在规则管理页新增了 **“启用智能根目录识别”** 开关，并配有详细的 Tooltip 说明。
      * **On (默认)**: 继续使用我们强大的“目录归并 + 评分排序”算法，适合处理大型软件目录。
      * **Off (平铺模式)**: 直接列出所有符合条件的 EXE，不进行任何折叠。适合处理存放了大量单文件小工具的“杂物间”目录。

**✨ 界面优化 (UI Polish)**

  * **规则概览更新**: 扫描页面的顶部概览条现在会实时反映“智能识别”是否开启，让用户对当前的扫描逻辑一目了然。
-----
### [2025-11-19] Beta 5.3 - 策略控制与关于页 (Policy & About)

**🛡️ 策略管理 (Policy Control)**

  * **去重开关 (Deduplication Toggle)**: 在“规则管理”页面新增“合并重复结果”选项。开启后，程序会自动合并来自不同源（如 Start Menu 和 UWP）的同名程序，避免列表臃肿。
  * **默认勾选策略 (Default Check State)**: 用户现在可以自定义扫描结果的默认勾选行为。例如，可以设置为“默认不勾选已存在的快捷方式”，防止意外覆盖；或者“默认勾选所有新增程序”，实现一键生成。

**ℹ️ 关于与归属 (About Info)**

  * **关于窗口 (About Dialog)**: 点击侧边栏底部的版本号或作者名，将弹出精美的“关于”窗口。
  * **链接跳转**: 包含指向项目 GitHub 仓库 (`/GGDesk`) 和开发者主页 (`/LceAn`) 的直接跳转按钮。

**🛠️ 修复与优化 (Fixes)**

  * **规则概览**: 修复了扫描页面顶部规则条显示不全的问题，现在能正确反映“大小过滤”等设置的状态。
  * **列表逻辑**: `populate_tree` 逻辑已更新，能够正确读取并应用用户设定的默认勾选策略。
### [2025-11-19] Beta 5.2 - 规则全覆盖与交互修复 (Full Rules & Fixes)

**🛡️ 核心修复 (Core Fixes)**

  * **Start Menu 过滤**: 修复了“开始菜单”扫描模式下不生效黑名单的严重逻辑漏洞。现在，凡是命中黑名单（如 `uninstall.exe`）的开始菜单快捷方式也会被自动剔除。

**✨ 界面补全 (UI Restoration & Expansion)**

  * **Info Bar 回归**: 恢复了在 Beta 5.0 中意外丢失的顶部淡蓝色提示条，重新提供操作引导。
  * **规则概览增强**: 扫描页面的淡黄色规则概览现在会显示所有生效的规则，包括“目标文件类型”（扩展名）。
  * **来源分类 (Source Column)**: 扫描结果列表新增 **“来源”** 列，明确区分程序是来自 `开始菜单`、`应用商店` 还是 `自定义目录`，数据来源一目了然。
### [2025-11-19] Beta 5.1.1 - 规则页面逻辑修正

**🛠️ 逻辑修正 (Logic Correction)**

  * **移除冗余设置**: 删除了“规则管理”页面 (`page_rules.py`) 中的“扫描范围”设置组。由于 Beta 5.1 已在扫描首页集成了更直观的源选择（开始菜单/UWP/自定义），原设置页的选项已无必要。
  * **职责明确化**:
      * **扫描页 (Scan Page)**: 负责决定 **扫描源 (Sources)**。
      * **规则页 (Rules Page)**: 负责决定 **过滤标准 (Filters)** (如大小、黑名单)。
### [2025-11-19] Beta 5.1 - 全能扫描与规则可视化

**🚀 扫描能力跃升 (Omni-Scan)**

  * **多源扫描 (Multi-Source)**:
      * 扫描程序页面新增了 **“开始菜单”**、**“应用商店 (UWP)”** 和 **“自定义目录”** 三个选项。
      * 默认开启全选，用户可一键扫描系统内所有应用（包括 UWP 应用，如计算器、Netflix 等）。
      * 自定义目录输入框支持折叠，当未勾选“自定义目录”时自动隐藏，保持界面简洁。

**🔍 规则可视化 (Visual Rules)**

  * **规则概览 (Summary Banner)**:
      * 在扫描页面顶部新增了淡黄色的规则概览条。
      * 实时显示当前生效的过滤规则（如“黑名单✅ | 大小限制 0-500MB”），让用户在点击扫描前心中有数。

**💻 核心逻辑增强 (Core Logic)**

  * **UWP 支持**: 后端实现了对 `shell:AppsFolder` 的解析，并支持创建特殊的 UWP 快捷方式（Target: `explorer.exe`, Args: `shell:AppsFolder\...`）。
  * **Scan Worker**: 升级了多线程工作类，支持传递扫描源列表，实现多任务并行/串行处理。
### [2025-11-19] Beta 5.0 - 规则引擎升级 

**🛡️ 规则管理重构 (Rule Management)**

  * **全新界面**: 废弃了旧版简单的文本框页面，重新设计了“规则管理”页面，采用分组 (`GroupBox`) 和开关 (`CheckBox`) 布局，层次分明。
  * **功能整合**: 将文件黑名单、目录黑洞整合为“开关 + 详情弹窗”的交互模式。用户可以一键启用/禁用某种过滤，点击按钮再进行详细编辑。
  * **大小过滤 (Size Filter)**: 新增文件大小过滤功能。用户可以自定义最小 (KB) 和最大 (MB) 阈值，自动过滤掉过小（如 uninstall helper）或过大（如安装包）的文件。

**⚙️ 后端逻辑升级 (Backend Logic)**

  * **Config Expansion**: `config.ini` 新增 `[Rules]` 节点，持久化存储所有过滤开关和阈值设置。
  * **Scan Logic Update**: `discover_programs` 函数全面适配新规则，增加了对文件大小和扩展名的实时检查。

**🔭 未来特性预埋 (Future Ready)**

  * **Scan Scope**: UI 中预留了“开始菜单”和“UWP 应用”的选项位置（Beta 6 计划），为未来的全方位扫描做好了布局准备。
  * **File Types**: 预留了 `.bat` 和 `.lnk` 的扩展名支持框架。
### [2025-11-19] Beta 4.7.1 - 详情页布局微调

**🎨 界面美化 (UI Improvements)**

  * **Header Layout**: 将详情修改窗口（RefineWindow）头部的程序名称和路径改为 **水平单行排列 (Horizontal)**。左侧显示粗体程序名，右侧显示灰色路径，既节省了垂直空间，又使信息展示更加紧凑和专业。

**✨ 体验提升 (UX Polish)**

  * 路径文字颜色调淡，形成清晰的视觉层级，避免喧宾夺主。
### [2025-11-19] Beta 4.7 - 详情页交互升级

**✨ 详情弹窗重构 (Refine Window Refactor)**

  * **美化布局**: 引入了一个淡灰色的头部信息栏，清晰展示当前正在编辑的程序名称和根目录，视觉上更加现代、专业。
  * **实时计数**: 底部工具栏新增“已选 X / 可见 Y (共 Z)”的动态计数器，在搜索筛选和勾选操作时实时更新，数据一目了然。
  * **双击操作**: 优化了列表交互，现在**双击**任意行即可快速反转该项的选中状态，无需精确点击 Checkbox 或使用 Ctrl+Click，操作效率大幅提升。
  * **图标优化**: 将文件图标移至第一列（程序名），与主界面保持一致的视觉语言。
### [2025-11-19] Beta 4.6 - 结果反馈优化

**✨ 交互体验 (UX Improvements)**

  * **美化生成成功弹窗 (Success Dialog)**:
      * 弃用了系统原生的 MessageBox，改用自定义设计的 `GenSuccessDialog`。
      * 弹窗包含醒目的成功图标、生成数量统计。
      * **新增功能**: “📂 打开生成目录”按钮，允许用户生成后一键直达目标文件夹，极大提升了操作流的连贯性。

**💻 技术细节 (Technical)**

  * **Backend Expansion**: 新增 `open_file_explorer` 函数，封装了 `os.startfile` 以支持在 Windows 资源管理器中打开路径。
  * **UI Customization**: `GenSuccessDialog` 继承自 `QDialog`，并移除了默认的问号帮助按钮，界面更清爽。
### [2025-11-19] Beta 4.5.1 - 状态显示微调

**✨ 界面优化 (UI Improvements)**

  * **状态列可读性**: 将“状态”列的显示方式从单 Emoji 图标 (`🆕`) 更新为 **Emoji + 文本** (`🆕 新增` / `✅ 已存在`)。这使得程序状态一目了然，减少了用户的认知负担，同时保留了 Tooltip 的详细说明功能。

### [2025-11-19] Beta 4.5 - 体验打磨与引导优化 (UX Polish & Guide)

**✨ 界面与引导 (UI/UX Guidance)**

  * **顶部说明板块 (Info Bar)**:
      * 在扫描结果列表上方新增了一个淡雅的蓝色提示条。
      * 提供简明的操作指引（双击修改、颜色含义），降低用户的学习成本。
  * **状态列人性化 (Status UX)**:
      * 将生硬的文字状态（“已存在”）替换为直观的 Emoji 图标（🆕 / ✅）。
      * 增加了 **Tooltip (悬停提示)**，鼠标指向状态图标时会显示详细解释（例如显示冲突的具体路径）。

**🔧 布局修复 (Layout Fixes)**

  * **侧边栏排版**: 修复了侧边栏底部“By LceAn”归属信息可能出现的错位或挤压问题。通过增加弹性空间 (`addStretch`) 和底部留白，使其视觉上更加稳重、美观。

**💻 代码优化 (Technical)**

  * **QSS Scope**: 为提示条引入了独立的 CSS ID 选择器 (`#infoFrame`)，确保样式只影响该特定组件，不污染全局设置。
### [2025-11-19] Beta 4.4 - 智能查重与状态管理 (Conflict Detection)

**🔍 智能查重 (Smart Detection)**

  * **功能描述**: 在扫描完成后，程序会自动扫描当前的“生成路径”，对比新扫描到的程序与现有快捷方式。
  * **比对逻辑 (Logic)**: 采用 **目标路径比对 (Target Path Match)**。如果发现已存在的快捷方式指向完全相同的 `.exe` 路径，则判定为“已存在”。
  * **后端支持**: `backend.normalize_path` 提供了标准化的路径处理，确保忽略大小写和路径分隔符差异。

**🚦 状态可视化 (Visual Status)**

  * **状态列 (Status Column)**: 列表新增“状态”列。
      * **🆕 新增**: 绿色文字，默认 **勾选**。
      * **✅ 已存在**: 灰色文字，默认 **不勾选**。
  * **体验提升**: 这一机制防止了用户重复生成相同的快捷方式，大大减少了冗余操作。

**🛡️ 生成保护 (Safety Check)**

  * **覆盖警告**: 在点击生成时，如果选中的项目会导致现有快捷方式被覆盖（文件名冲突），会弹出确认对话框，防止误操作。
### [2025-11-19] Beta 4.3.3 - 工程模块化重构 (Component Separation)

**🧱 架构重构 (Architectural Overhaul)**

  * **UI 组件拆分**: 将庞大的 `scanner_ui.py` 拆解为独立的模块，极大地提升了代码的可维护性和扩展性。
      * `ui/page_scan.py`: 负责扫描逻辑、工作线程和详情弹窗。
      * `ui/page_output.py`: 负责输出路径管理和现有快捷方式预览。
      * `ui/page_filter.py`: 负责黑名单和忽略目录管理。
      * `ui/page_settings.py`: 负责主题切换和日志显示。
      * `ui/main_window.py`: 负责整体布局框架和页面间的信号调度。
  * **信号驱动通信 (Signal-Driven)**: 页面之间不再直接调用（低耦合），而是通过 Signal/Slot 机制在 `MainWindow` 中进行消息转发（如：路径修改同步、日志记录）。

**✨ 功能保持**: 保持了 Beta 4.3.2 的所有功能和修复，仅在代码结构层面进行了彻底的现代化改造。

### [2025-11-18] Beta 4.3 - 架构扩展与全选优化

**🧱 架构扩展 (Architecture Expansion)**

  * **独立输出管理页 (Output View)**:
      * 侧边栏新增一级菜单 **“生成路径”**。
      * 将输出路径设置从“系统设置”中剥离，提供更专注的管理界面。
      * **实时预览**: 新增“当前路径下已存在的快捷方式”列表，支持实时扫描和展示，为后续的“重复检测 (Beta 4.4)”做好数据准备。

**✨ 交互体验优化 (UX)**

  * **原生全选列头 (Native Header Checkbox)**:
      * 移除 Beta 4.2 中临时的复选框控件。
      * 在列表的“程序名称”列头直接集成复选框。点击列头即可实现全选/反选，操作逻辑更符合原生系统体验。
      * 修复了全选操作导致列表刷新异常（空白）的 Bug。
  * **文案复原**: 扫描页顶部提示语恢复为“发现结果 (双击修改...)”，保持界面简洁。

**💻 技术细节 (Technical)**

  * **Backend**: 新增 `scan_existing_shortcuts` 函数，利用 `WScript.Shell` 解析现有 `.lnk` 文件的目标路径。
  * **Event Handling**: 通过监听 `QHeaderView` 的 `itemClicked` 信号来实现列头复选框的逻辑，并使用 `blockSignals` 优化批量更新时的性能。

### [2025-11-18] Beta 4.2 - 细节打磨与品牌化 (Refining & Branding)

**✨ 交互体验 (UX Improvements)**

  * **全选/计数联动 (Selection Control)**:
      * 列表头新增 **“全选列表”** 复选框，一键管理所有扫描结果。
      * 列表头右侧新增 **实时计数器** (`已选 X / 共 Y 个`)，根据用户的勾选操作动态刷新，数据展示更直观。
  * **生成路径提示 (Path Hint)**:
      * “生成”按钮上方新增淡雅的路径提示文字 (`将生成至: ...`)。
      * 该提示会实时同步“应用设置”中的路径修改，防止用户误操作。

**🎨 界面微调 (UI Tweaks)**

  * **归属信息 (Attribution)**: 侧边栏底部版本号下方新增 **"By LceAn"** 署名，字体采用更细腻的层级处理（更小、更淡）。
  * **布局优化**: 优化了头部和底部的间距与对齐，使界面看起来更紧凑、专业。

**💻 技术细节 (Technical)**

  * **Signal Blocking**: 在执行批量全选操作时，暂时屏蔽 `itemChanged` 信号，避免触发成百上千次重复计算，保证 UI 流畅度。
  * **Dynamic Linking**: 实现了 `Settings` 页面的路径输入框与 `Scanner` 页面的路径提示标签之间的实时信号连接。

### [2025-11-18] Beta 4.1 - 智能分词算法与交互微调

**🧠 算法核心升级 (Algorithm)**

  * **分词加权匹配 (Token Scoring)**:
      * 解决了 `IntelliJ IDEA` 无法识别 `idea64.exe` 的问题。
      * 新算法将程序名拆解为特征词 (Tokens)，如 `['intellij', 'idea']`，如果文件名匹配任意特征词，给予 **+150分** 的极高权重。
      * **效果**: 完美修复了 JetBrains 全家桶及其他缩写类程序的识别准确率，彻底压制了 `launcher.exe` 等通用名的权重。

**✨ 交互体验优化 (UX)**

  * **复选框支持 (Batch Selection)**:
      * 程序列表第一列新增复选框。
      * 用户现在可以手动取消勾选不需要的程序，生成按钮只会处理被勾选的项目。
  * **图标归位**: 程序图标已移至 **第 2 列 (推荐执行文件)**，逻辑上更符合直觉（因为图标属于那个 .exe 文件）。
  * **工具提示 (Tooltips)**: 鼠标悬停在列表项上时，会显示完整的文件路径，解决了路径过长显示不全的问题。

**💻 技术细节 (Technical)**

  * **Scanner UI**: 重构了 `generate` 函数，改为遍历 `QTreeWidget` 的 `CheckState` 状态来决定是否创建快捷方式。

### [2025-11-18] Beta 4.0 - 工程重构与模块化

**🧱 架构重构 (Architecture & Refactoring)**

  * **模块化拆分 (Modularization)**: 将单文件项目拆分为标准的 Python 模块结构。
      * `scanner_backend.py`: 核心业务逻辑与 I/O。
      * `scanner_ui.py`: GUI 界面与线程控制。
      * `scanner_styles.py`: 独立的 QSS 样式表文件。
      * `main.py`: 干净的程序入口。
  * **文件结构优化**: 明确了配置文件的生成规则，项目根目录更加清晰。

**✨ 新增功能 (New Features)**

  * **独立过滤规则菜单 (Filters Menu)**: 在侧边栏新增“过滤规则”页面，将文件黑名单与目录黑名单管理从系统设置中分离。
  * **黑洞目录管理 (Blackhole Dirs UI)**: 新增 `ignored_dirs.txt` 的可视化编辑功能。用户现在可以在界面上直接查看和修改需要跳过的目录列表，实时优化扫描性能。
  * **Splitter 布局**: 过滤规则页面采用 `QSplitter` 左右分栏布局，方便同时对比和编辑两类规则。

**💻 技术细节 (Technical)**

  * **Config Persistence**: 新增 `ignored_dirs.txt` 的自动加载与保存逻辑。
  * **Refactoring**: 从 UI 代码中移除了硬编码的 CSS 字符串，提高了代码的可读性与可维护性。


### [2025-11-18] Beta 3.2 - 性能专项优化

**⚡ 性能优化 (Performance Optimization)**

  * **黑洞目录剪枝 (Directory Pruning)**:
      * 在后端扫描逻辑中引入了 `IGNORED_DIRS` 机制。
      * 程序现在会自动识别并**完全跳过** `node_modules`, `.git`, `venv`, `Windows`, `ProgramData` 等庞大且无关的目录。
      * **效果**: 在扫描开发环境（包含大量 `node_modules`）或系统盘根目录时，扫描速度提升了 **10倍以上**，并有效避免了无意义的权限错误。

**💻 技术细节 (Technical)**

  * **Algorithm**: 在 `os.walk` 循环中利用 `topdown=True` 特性，通过原地修改 `dirs` 列表 (`dirs[:] = ...`) 来物理阻止递归进入指定目录，这比遍历后再过滤要高效得多。

### [2025-11-18] Beta 3.1 - 智能算法与现代 UI

**🧠 核心升级 (Core Enhancements)**

  * **智能评分算法 (Smart Ranking)**: 后端 `scanner_backend.py` 引入了全新的评分机制。不再简单地返回第一个 .exe，而是根据“文件名匹配度”、“目录深度”、“常见启动关键词 (launcher, main)”等维度进行加权打分，大幅提高了自动识别主程序的准确率。
  * **算法逻辑优化**: 优化了目录遍历和分组逻辑，减少了对系统文件的无效扫描。

**🎨 界面现代化 (Modern UI / Fluent Design)**

  * **卡片式布局**: 采用灰白/深灰对比色，将主内容区设计为悬浮卡片样式，增强视觉层次感。
  * **圆角与间距**: 全面增加控件的 `border-radius` 和 `padding`，按钮和输入框更加圆润、舒适。
  * **图标化导航**: 侧边栏按钮增加图标支持，使用 Qt 标准图标库，界面更加直观生动。
  * **状态栏反馈**: 底部增加状态栏和进度条动画，在扫描时提供清晰的“繁忙”反馈。

**✨ 体验优化 (UX Improvements)**

  * **主列表图标**: 程序列表现在会提取并显示 .exe 文件的真实图标，极大地提升了辨识度。
  * **双击交互**: 完善了双击列表项打开“详情修改”窗口的逻辑。
  * **设置持久化**: 完善了对上次扫描路径、输出路径、主题偏好、窗口大小的自动保存与加载。

**🐛 Bug Fixes**

  * 修复了多线程停止时可能导致的状态栏文字滞留问题。
  * 修复了黑名单保存时未去除空行的问题。

### [2025-11-18] Beta 3.0 - 交互体验与视觉升级



*(注：这是刚才完成的最新版本)*

- **✨ New Features:**
  - **图标支持**：程序列表现在显示 `.exe` 文件的原生图标 (`QFileIconProvider`)。
  - **扫描控制**：新增“开始/停止”按钮，支持随时中断扫描任务。
  - **主题切换**：内置“暗黑/明亮”两种主题，支持在设置中动态切换。
  - **交互优化**：支持双击列表项直接修改详情；移除 "Stage 1/2" 术语。
  - **路径自定义**：支持自定义快捷方式生成的输出目录。
- **🛠️ Fixes:**
  - 修复了扫描时 UI 冻结的问题（继承自 Beta 2 的多线程架构）。
  - 首页移除冗余日志，改为状态栏显示。

------



### [2025-11-18] Beta 2 (v8.3 - v8.4.1) - 架构重构与多线程



- **🚀 Architecture:**
  - **UI 布局重构 (v8.3)**：弃用垂直布局，引入 **Sidebar (侧边栏) + StackedWidget (多页面)** 的现代应用布局。
  - **多线程扫描 (v8.4)**：引入 `QThread` 和 `Worker` 模式，将 I/O 扫描任务移出主线程，彻底解决扫描大目录时界面卡死 (Not Responding) 的问题。
- **🐛 Bug Fixes:**
  - **v8.4.1 Hotfix**：修复了多线程下对象生命周期管理错误导致的 `0xC0000409` 堆栈崩溃问题（Race Condition）。
  - 修复了 `super().__init__()` 在 `QObject` 子类中缺失导致的对象未初始化问题。
- **🔧 Improvements:**
  - 引入 `Logger` 信号机制，实现跨线程日志安全传输。
  - 将“黑名单管理”移至独立的设置页面。

------



### [2025-11-18] Beta 1 (v8.0 - v8.2) - 技术栈迁移 (Tkinter to Qt)



- **⚡ Framework Switch:**
  - **弃用 Tkinter**：由于原生控件限制和美化困难，完全移除 Python 内置 Tkinter 库。
  - **引入 PySide6 (Qt)**：采用工业级 GUI 框架重写所有前端代码，支持更丰富的控件和样式表 (QSS)。
- **🧱 Core Logic:**
  - **前后端分离 (v8.1)**：将核心业务逻辑剥离为独立的 `scanner_backend.py` 模块，实现逻辑复用。
  - **配置文件集成**：引入 `config.ini`，实现对窗口大小、上次扫描路径的持久化存储。
- **🎨 UI/UX:**
  - **QSS 样式表 (v8.2)**：首次引入类似 CSS 的样式定义，实现基础的“暗黑模式”外观。
  - 使用 `QTreeWidget` 替代 `ScrolledText`，实现原生的多列列表和列排序功能。

------



### [2025-11-18] Alpha Phase (v1 - v7) - 原型验证与逻辑探索



- **v7 (Discovery Logic)**：
  - **程序发现算法**：也就是“两级火箭”逻辑。不再简单罗列所有 `.exe`，而是智能识别“程序根目录”并分组展示。
  - **启发式匹配**：实现了基于文件夹名称的关键词匹配算法，自动建议主程序（如在 `CLion/.../bin` 中自动选中 `clion64.exe`）。
- **v4 - v6 (Tkinter Demo)**：
  - **v6**：尝试基于文件大小的过滤逻辑（已废弃，被 v7 启发式取代）。
  - **v5**：实现了基础的 GUI 界面，支持全选/反选、查看黑名单。
  - **v4**：实现了日志在界面内的实时输出。
- **v1 - v3 (Scripting)**：
  - **v3**：首次引入 GUI (Tkinter)。
  - **v2**：引入“黑名单”机制，过滤 `uninstall.exe` 等无关文件。
  - **v1**：基于 `pywin32` 的概念验证脚本，实现基本的快捷方式创建功能。